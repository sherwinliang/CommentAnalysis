webpackJsonp([1],{"0Dbu":function(e,t){},"5zum":function(e,t){},LBls:function(e,t){},LOOz:function(e,t){},LrXu:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"background-color":"rgba(235, 235, 235, 0.08)"},attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},s=n("VU/8")({name:"app"},i,!1,function(e){n("d4F1")},null,null).exports,o=n("/ocq"),r=n("mtWM"),l=n.n(r),c=function(e,t){return l()({method:"post",url:""+e,data:t,transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},d=function(e,t){return l()({method:"put",url:""+e,data:t,transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},u=function(e){return l()({method:"delete",url:""+e})},m=function(e,t){return l()({method:"get",data:t,transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"},url:""+e})},p={data:function(){return{rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{username:"XiaoMing",password:"123"},loading:!1}},methods:{submitClick:function(){var e=this;this.loading=!0,c("/login",{username:this.loginForm.username,password:this.loginForm.password}).then(function(t){if(e.loading=!1,200==t.status){"success"==t.data.status?e.$router.replace({path:"/home"}):e.$alert("登录失败!","失败!")}else e.$alert("登录失败!","失败!")},function(t){e.loading=!1,e.$alert("找不到服务器⊙﹏⊙∥!","失败!")})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login-container",attrs:{rules:e.rules,"label-position":"left","label-width":"0px"}},[n("h3",{staticClass:"login_title"},[e._v("系统登录")]),e._v(" "),n("el-form-item",{attrs:{prop:"account"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"checkPass"}},[n("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){t.preventDefault(),e.submitClick(t)}}},[e._v("登录")])],1)],1)},staticRenderFns:[]},f=n("VU/8")(p,h,!1,function(e){n("p9uA")},null,null).exports,g={methods:{handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m("/logout"),t.currentUserName="游客",t.$router.replace({path:"/"})},function(){})}},mounted:function(){var e=this;m("/currentUserName").then(function(t){e.currentUserName=t.data},function(t){e.currentUserName="游客"})},data:function(){return{currentUserName:""}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"home_container"},[n("el-header",[n("div",{staticClass:"home_title"}),e._v(" "),n("div",{staticClass:"home_userinfoContainer"},[n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link home_userinfo"},[e._v("\n  "+e._s(e.currentUserName)),n("i",{staticClass:"el-icon-arrow-down el-icon--right home_userinfo"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"background-color":"#ECECEC"},attrs:{"default-active":"0",router:""}},[e._l(this.$router.options.routes,function(t,a){return t.hidden?e._e():[t.children.length>1?n("el-submenu",{key:a,attrs:{index:a+""}},[n("template",{slot:"title"},[n("i",{class:t.iconCls}),e._v(" "),n("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():n("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v("\n              "+e._s(t.name)+"\n            ")])})],2):[n("el-menu-item",{attrs:{index:t.children[0].path}},[n("i",{class:t.children[0].iconCls}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.children[0].name))])])]]})],2)],1),e._v(" "),n("el-container",[n("el-main",[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),n("el-breadcrumb-item",{domProps:{textContent:e._s(this.$router.currentRoute.name)}})],1),e._v(" "),n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):e._e()],1),e._v(" "),this.$route.meta.keepAlive?e._e():n("router-view")],1)],1)],1)],1)},staticRenderFns:[]},y=n("VU/8")(g,v,!1,function(e){n("0Dbu")},null,null).exports,b=n("Gu7T"),x=n.n(b),_=n("Icdr"),w=n.n(_),S=n("y1vT"),C=n.n(S),k=["legendselectchanged","legendselected","legendunselected","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected"],$=["click","dblclick","mouseover","mouseout","mousedown","mouseup","globalout"],I={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoResize:Boolean,watchShallow:Boolean},data:function(){return{chart:null}},computed:{width:{cache:!1,get:function(){return this.delegateGet("width","getWidth")}},height:{cache:!1,get:function(){return this.delegateGet("height","getHeight")}},isDisposed:{cache:!1,get:function(){return!!this.delegateGet("isDisposed","isDisposed")}},computedOptions:{cache:!1,get:function(){return this.delegateGet("computedOptions","getOption")}}},watch:{group:function(e){this.chart.group=e}},methods:{mergeOptions:function(e,t,n){this.delegateMethod("setOption",e,t,n)},resize:function(e){this.delegateMethod("resize",e)},dispatchAction:function(e){this.delegateMethod("dispatchAction",e)},convertToPixel:function(e,t){return this.delegateMethod("convertToPixel",e,t)},convertFromPixel:function(e,t){return this.delegateMethod("convertFromPixel",e,t)},containPixel:function(e,t){return this.delegateMethod("containPixel",e,t)},showLoading:function(e,t){this.delegateMethod("showLoading",e,t)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(e){return this.delegateMethod("getDataURL",e)},getConnectedDataURL:function(e){return this.delegateMethod("getConnectedDataURL",e)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(e){var t;if(this.chart){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return(t=this.chart)[e].apply(t,x()(i))}a.default.util.warn("Cannot call ["+e+"] before the chart is initialized. Set prop [options] first.",this)},delegateGet:function(e,t){return this.chart||a.default.util.warn("Cannot get ["+e+"] before the chart is initialized. Set prop [options] first.",this),this.chart[t]()},init:function(){var e=this;if(!this.chart){var t=w.a.init(this.$el,this.theme,this.initOptions);this.group&&(t.group=this.group),t.setOption(this.options,!0),k.forEach(function(n){t.on(n,function(t){e.$emit(n,t)})}),$.forEach(function(n){t.on(n,function(t){e.$emit(n,t),e.$emit("chart"+n,t)})}),this.autoResize&&(this.__resizeHanlder=C()(function(){t.resize()},100,{leading:!0}),window.addEventListener("resize",this.__resizeHanlder)),this.chart=t}},destroy:function(){this.autoResize&&window.removeEventListener("resize",this.__resizeHanlder),this.dispose(),this.chart=null},refresh:function(){this.destroy(),this.init()}},created:function(){var e=this;this.$watch("options",function(t){!e.chart&&t?e.init():e.chart.setOption(e.options,!0)},{deep:!this.watchShallow});["theme","initOptions","autoResize","watchShallow"].forEach(function(t){e.$watch(t,function(){e.refresh()},{deep:!0})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoResize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(e){"string"!=typeof e&&(e=e.map(function(e){return e.chart})),w.a.connect(e)},disconnect:function(e){w.a.disConnect(e)},registerMap:function(){w.a.registerMap.apply(w.a,arguments)},registerTheme:function(){w.a.registerTheme.apply(w.a,arguments)}},z={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"echarts"})},staticRenderFns:[]},D=n("VU/8")(I,z,!1,function(e){n("LOOz")},null,null).exports,L=(n("4UDB"),n("Oq2I"),n("LbEf"),n("80cc"),n("miEh"),n("SwK5"),n("GbHy"),{components:{chart:D},mounted:function(){this.initProductSelections()},methods:{buildTrendCharts:function(){var e=this;e.isShow=!1,m("/analysis/score-years?productId="+e.productId).then(function(t){t.data.years?(e.isShow=!0,e.$refs.dschart.options.xAxis.data=t.data.years,e.$refs.dschart.options.series[0].data=t.data.avgScores):e.$message({type:"error",message:"该产品ID无数据!"})},function(t){e.$message({type:"error",message:"数据加载失败!"})})},analysisTrend:function(){var e=this;this.isLoading=!0,this.btnTxt="分析中...",m("/analysis/trend").then(function(t){"success"==t.data.status?e.$message({type:t.data.status,message:t.data.msg}):e.$message({type:"error",message:"分析失败!"}),e.isLoading=!1,e.btnTxt="分析"},function(t){e.$message({type:"error",message:"数据加载失败!"}),e.isLoading=!1,e.btnTxt="分析"})},initProductSelections:function(){var e=this;m("/analysis/product/list").then(function(t){"success"==t.data.status?e.productSelections=t.data.data:e.$message({type:"error",message:t.data.msg})},function(t){e.$message({type:"error",message:"数据加载失败!"})})}},data:function(){return{btnTxt:"分析",isLoading:!1,isShow:!1,productId:"",productSelections:[],polar:{title:{text:"商品评分趋势图"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{},legend:{data:["年份"]},xAxis:{data:[]},yAxis:{axisLabel:{formatter:function(e,t){return e.toFixed(1)}}},series:[{name:"平均评分",type:"line",data:[]}],animationDuration:3e3}}}}),V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticClass:"trend_header"},[e._v("\n      商品ID：\n    "),n("el-select",{attrs:{filterable:"",placeholder:"请选择","reserve-keyword":!0},on:{change:e.buildTrendCharts},model:{value:e.productId,callback:function(t){e.productId=t},expression:"productId"}},e._l(e.productSelections,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium",loading:e.isLoading},on:{click:e.analysisTrend}},[e._v(e._s(e.btnTxt))])],1),e._v(" "),n("el-main",{staticClass:"trend_main"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{display:"flex",height:"400px",width:"100%","align-items":"center","justify-content":"center"}},[n("chart",{ref:"dschart",staticStyle:{"margin-top":"20px"},attrs:{options:e.polar}})],1)])],1)},staticRenderFns:[]},R=n("VU/8")(L,V,!1,function(e){n("l40k"),n("5zum")},null,null).exports,T={components:{chart:D},mounted:function(){this.buildSaleCharts()},methods:{buildSaleCharts:function(){var e=this;e.isShow=!1,m("/analysis/sale-volumn?rangeCount="+e.rangeCount).then(function(t){t.data.productIds?(e.isShow=!0,e.$refs.dschart.options.xAxis.data=t.data.productIds,e.$refs.dschart.options.series[0].data=t.data.saleVolumns):e.$message({type:"error",message:"查无数据!"})},function(t){e.$message({type:"error",message:"数据加载失败!"})})},analysisSales:function(){var e=this;this.isLoading=!0,this.btnTxt="分析中...",m("/analysis/sales").then(function(t){"success"==t.data.status?e.$message({type:t.data.status,message:t.data.msg}):e.$message({type:"error",message:"查无数据!"}),e.isLoading=!1,e.btnTxt="分析"},function(t){e.$message({type:"error",message:"数据加载失败!"}),e.isLoading=!1,e.btnTxt="分析"})}},data:function(){return{rangeCount:5,rangeSelections:[5,10,15,20],isShow:!1,btnTxt:"分析",isLoading:!1,polar:{title:{text:"商品销量排行图"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{},legend:{data:["商品"]},xAxis:{data:[]},yAxis:{},series:[{name:"销量",type:"bar",data:[]}],animationDuration:3e3}}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticClass:"sale_header"},[e._v("\n      销量排行前："),n("el-select",{staticStyle:{width:"200px"},attrs:{size:"medium"},on:{change:e.buildSaleCharts},model:{value:e.rangeCount,callback:function(t){e.rangeCount=t},expression:"rangeCount"}},e._l(e.rangeSelections,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium",loading:e.isLoading},on:{click:e.analysisSales}},[e._v(e._s(e.btnTxt))])],1),e._v(" "),n("el-main",{staticClass:"sale_main"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{display:"flex",height:"400px",width:"100%","align-items":"center","justify-content":"center"}},[n("chart",{ref:"dschart",staticStyle:{"margin-top":"20px"},attrs:{options:e.polar}})],1)])],1)},staticRenderFns:[]},A=n("VU/8")(T,U,!1,function(e){n("QKPl"),n("LrXu")},null,null).exports,M={name:"DataManage",data:function(){return{searchValue:{productId:null,userId:null,score:null,beginDateScope:null},noEdit:!0,isLoading:!1,filterLoadingMsg:"过滤数据",title:"",comments:[],comment:{},loading:!1,dialogVisible:!1,total:0,page:1,size:10,scoreSelections:["1","2","3","4","5"],defaultProps:{children:"children",label:"name"},rules:{productId:[{required:!0,message:"请输入商品ID",trigger:"blur"}],userId:[{required:!0,message:"请输用户ID",trigger:"blur"}],profileName:[{required:!0,message:"请输入用户档案名",trigger:"blur"}],helpfulnessNumerator:[{required:!0,message:"请输入认为评论有用的计数",trigger:"blur"}],helpfulnessDenominator:[{required:!0,message:"请输入总计数",trigger:"blur"}],score:[{required:!0,message:"请输入评分",trigger:"blur"}],time:[{required:!0,message:"请输入时间",trigger:"blur"}],summary:[{required:!0,message:"请输入关键字",trigger:"blur"}],text:[{required:!0,message:"请输入评论详情",trigger:"blur"}]}}},mounted:function(){this.initComments(),this.emptyComment()},methods:{emptyComment:function(){this.comment={id:"",productId:"",userId:"",profileName:"",helpfulnessNumerator:0,helpfulnessDenominator:5,score:5,time:new Date,summary:"",text:""}},showEditCommentView:function(e){this.noEdit=!0,this.title="编辑评论",this.comment=e,this.dialogVisible=!0},deleteComment:function(e){var t=this;this.$confirm("此操作将永久删除该评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u("/comments/delete/"+e.id).then(function(e){e&&t.initComments()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},filterCommentData:function(){var e=this;this.isLoading=!0,this.filterLoadingMsg="过滤中...",u("/analysis/filter").then(function(t){"success"==t.data.status?e.$message({type:t.data.status,message:t.data.msg}):e.$message({type:"error",message:"过滤数据异常!"}),e.isLoading=!1,e.filterLoadingMsg="过滤数据"},function(t){e.$message({type:"error",message:"过滤数据异常!"}),e.isLoading=!1,e.filterLoadingMsg="过滤数据"})},doAddComment:function(){var e=this;this.comment.id?this.$refs.commentForm.validate(function(t){t&&(e.comment.time=e.$options.filters.formatDateTime(e.comment.time),d("/comments/update/",e.comment).then(function(t){t&&(e.dialogVisible=!1,e.initComments())}))}):this.$refs.commentForm.validate(function(t){t&&(e.comment.time=e.$options.filters.formatDateTime(e.comment.time),c("/comments/add/",e.comment).then(function(t){t&&(e.dialogVisible=!1,e.initComments())}))})},sizeChange:function(e){this.size=e,this.initComments()},currentChange:function(e){this.page=e,this.initComments()},showAddCommentView:function(){this.noEdit=!1,this.emptyComment(),this.title="添加评论",this.dialogVisible=!0},initComments:function(){var e=this;this.loading=!0;var t="/comments/list/?page="+this.page+"&size="+this.size;this.searchValue.productId&&(t+="&productId="+this.searchValue.productId),this.searchValue.userId&&(t+="&userId="+this.searchValue.userId),this.searchValue.score&&(t+="&score="+this.searchValue.score),this.searchValue.beginDateScope&&(t+="&beginDateScope="+this.searchValue.beginDateScope),m(t).then(function(t){e.loading=!1,t&&(e.comments=t.data.data,e.total=t.data.total)})}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("transition",{attrs:{name:"slide-fade"}},[n("div",{staticStyle:{border:"1px solid #409eff","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[n("el-row",[n("el-col",{attrs:{span:5}},[e._v("\n            商品ID:\n            "),n("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入商品ID",size:"mini"},model:{value:e.searchValue.productId,callback:function(t){e.$set(e.searchValue,"productId",t)},expression:"searchValue.productId"}})],1),e._v(" "),n("el-col",{attrs:{span:5}},[e._v("\n            用户ID:\n            "),n("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入用户ID",size:"mini"},model:{value:e.searchValue.userId,callback:function(t){e.$set(e.searchValue,"userId",t)},expression:"searchValue.userId"}})],1),e._v(" "),n("el-col",{attrs:{span:8}},[e._v("\n            评分:\n            "),n("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:" 评分",size:"mini"},model:{value:e.searchValue.score,callback:function(t){e.$set(e.searchValue,"score",t)},expression:"searchValue.score"}},e._l(e.scoreSelections,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:10}},[e._v("\n            时间:\n            "),n("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.beginDateScope,callback:function(t){e.$set(e.searchValue,"beginDateScope",t)},expression:"searchValue.beginDateScope"}})],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:function(t){e.initComments()}}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary"},on:{click:e.showAddCommentView}},[e._v("添加评论")]),e._v(" "),n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary",loading:e.isLoading},on:{click:e.filterCommentData}},[e._v(e._s(e.filterLoadingMsg))])],1)],1)],1)])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.comments,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("el-table-column",{attrs:{label:"编号",fixed:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.page-1)*e.size+1))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"productId",fixed:"",align:"left",label:"商品ID",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userId",label:"用户ID",align:"left",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"profileName",label:"用户档案名",align:"left",width:"110"}}),e._v(" "),n("el-table-column",{attrs:{prop:"helpfulnessNumerator",width:"90",align:"left",label:"有效计数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"helpfulnessDenominator",width:"80",align:"left",label:"总计数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"score",width:"50",label:"评分"}}),e._v(" "),n("el-table-column",{attrs:{prop:"time",width:"120",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.time)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"summary",width:"150",label:"概述"}}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"text",label:"详情"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini"},on:{click:function(n){e.showEditCommentView(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",type:"danger"},on:{click:function(n){e.deleteComment(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-form",{ref:"commentForm",attrs:{model:e.comment,rules:e.rules}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"商品ID:",prop:"productId"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{disabled:e.noEdit,size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入商品ID"},model:{value:e.comment.productId,callback:function(t){e.$set(e.comment,"productId",t)},expression:"comment.productId"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{disabled:e.noEdit,label:"用户ID:",prop:"userId"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入用户ID"},model:{value:e.comment.userId,callback:function(t){e.$set(e.comment,"userId",t)},expression:"comment.userId"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{disabled:e.noEdit,label:"用户档案名:",prop:"profileName"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入用户档案名"},model:{value:e.comment.profileName,callback:function(t){e.$set(e.comment,"profileName",t)},expression:"comment.profileName"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"评论有用计数:",prop:"helpfulnessNumerator"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入认为评论有用的计数"},model:{value:e.comment.helpfulnessNumerator,callback:function(t){e.$set(e.comment,"helpfulnessNumerator",t)},expression:"comment.helpfulnessNumerator"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"评论总计数:",prop:"helpfulnessDenominator"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入评论总计数"},model:{value:e.comment.helpfulnessDenominator,callback:function(t){e.$set(e.comment,"helpfulnessDenominator",t)},expression:"comment.helpfulnessDenominator"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"评分:",prop:"score"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择评分",size:"mini"},model:{value:e.comment.score,callback:function(t){e.$set(e.comment,"score",t)},expression:"comment.score"}},e._l(e.scoreSelections,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"评论日期:",prop:"time"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"评论日期"},model:{value:e.comment.time,callback:function(t){e.$set(e.comment,"time",t)},expression:"comment.time"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"评论概述:",prop:"summary"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入评论概述"},model:{value:e.comment.summary,callback:function(t){e.$set(e.comment,"summary",t)},expression:"comment.summary"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"评论详情:",prop:"text"}},[n("el-input",{staticStyle:{width:"700px"},attrs:{size:"mini",type:"textArea","prefix-icon":"el-icon-edit","max-length":"200",placeholder:"请输入评论详情"},model:{value:e.comment.text,callback:function(t){e.$set(e.comment,"text",t)},expression:"comment.text"}})],1)],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.doAddComment}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]},N=n("VU/8")(M,F,!1,function(e){n("Q+7Z")},null,null).exports,O={methods:{queryOrderedProducts:function(){var e=this;m("/analysis/range?rangeCount="+e.rangeCount).then(function(t){e.products=t.data.data},function(t){403==t.response.status&&e.$message({type:"error",message:t.response.data})})}},mounted:function(){this.queryOrderedProducts()},data:function(){return{rangeCount:20,rangeSelections:[10,20,30,40,50],products:[]}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticClass:"product_order_header"},[e._v("\n      评分排行前："),n("el-select",{staticStyle:{width:"200px"},attrs:{size:"medium"},model:{value:e.rangeCount,callback:function(t){e.rangeCount=t},expression:"rangeCount"}},e._l(e.rangeSelections,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium"},on:{click:e.queryOrderedProducts}},[e._v("查询")])],1),e._v(" "),n("el-main",{staticClass:"product_order_main"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.products,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"商品ID",prop:"productId",width:"200",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"平均评分",prop:"avgScore",width:"120",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"最高评分",prop:"maxScore",width:"120",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"最低评分",prop:"minScore",width:"120",align:"left"}})],1)],1)],1)},staticRenderFns:[]},q=n("VU/8")(O,E,!1,function(e){n("LBls")},null,null).exports,B={mounted:function(){this.loading=!0,this.loadUserList(),this.cardloading=Array.apply(null,Array(20)).map(function(e,t){return!1}),this.eploading=Array.apply(null,Array(20)).map(function(e,t){return!1})},methods:{saveRoles:function(e,t){var n=this.roles;if(this.cpRoles.length==n.length){for(var a=0;a<this.cpRoles.length;a++)for(var i=0;i<n.length;i++)if(this.cpRoles[a].id==n[i]){n.splice(i,1);break}if(0==n.length)return}var s=this;s.cardloading.splice(t,1,!0),d("/admin/user/role",{rids:this.roles,id:e}).then(function(n){200==n.status&&"success"==n.data.status?(s.$message({type:n.data.status,message:n.data.msg}),s.loadOneUserById(e,t)):(s.cardloading.splice(t,1,!1),s.$message({type:"error",message:"更新失败!"}))},function(e){if(s.cardloading.splice(t,1,!1),403==e.response.status){var n=e.response.data;s.$message({type:"error",message:n})}})},showRole:function(e,t,n){this.cpRoles=e,this.roles=[],this.loadRoles(n);for(var a=0;a<e.length;a++)this.roles.push(e[a].id)},deleteUser:function(e){var t=this;this.$confirm("删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,u("/admin/user/"+e).then(function(e){if(200==e.status&&"success"==e.data.status)return t.$message({type:"success",message:"删除成功!"}),void t.loadUserList();t.loading=!1,t.$message({type:"error",message:"删除失败!"})},function(e){t.loading=!1,t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},enabledChange:function(e,t,n){var a=this;a.cardloading.splice(n,1,!0),d("/admin/user/enabled",{enabled:e,uid:t}).then(function(e){if(200!=e.status)return a.$message({type:"error",message:"更新失败!"}),void a.loadOneUserById(t,n);a.cardloading.splice(n,1,!1),a.$message({type:"success",message:"更新成功!"})},function(e){a.$message({type:"error",message:"更新失败!"}),a.loadOneUserById(t,n)})},loadRoles:function(e){var t=this;t.eploading.splice(e,1,!0),m("/admin/roles").then(function(n){t.eploading.splice(e,1,!1),200==n.status?t.allRoles=n.data:t.$message({type:"error",message:"数据加载失败!"})},function(n){if(t.eploading.splice(e,1,!1),403==n.response.status){var a=n.response.data;t.$message({type:"error",message:a})}})},loadOneUserById:function(e,t){var n=this;m("/admin/user/"+e).then(function(e){n.cardloading.splice(t,1,!1),200==e.status?n.users.splice(t,1,e.data):n.$message({type:"error",message:"数据加载失败!"})},function(e){if(n.cardloading.splice(t,1,!1),403==e.response.status){var a=e.response.data;n.$message({type:"error",message:a})}})},loadUserList:function(){var e=this;m("/admin/user?nickname="+this.keywords).then(function(t){e.loading=!1,200==t.status?e.users=t.data:e.$message({type:"error",message:"数据加载失败!"})},function(t){if(e.loading=!1,403==t.response.status){var n=t.response.data;e.$message({type:"error",message:n})}})},searchClick:function(){this.loading=!0,this.loadUserList()}},data:function(){return{loading:!1,eploading:[],cardloading:[],keywords:"",users:[],allRoles:[],roles:[],cpRoles:[]}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"center"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"默认展示部分用户，可以通过用户名搜索用户...","prefix-icon":"el-icon-search",size:"small"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.searchClick}},[e._v("搜索\n    ")])],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-around","flex-wrap":"wrap"}},e._l(e.users,function(t,a){return n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.cardloading[a],expression:"cardloading[index]"}],key:a,staticStyle:{width:"330px","margin-top":"10px"}},[n("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.nickname))]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0509"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){e.deleteUser(t.id)}}},[e._v("删除\n        ")])],1),e._v(" "),n("div",[n("div",[n("img",{staticStyle:{width:"70px",height:"70px"},attrs:{src:t.userface,alt:t.nickname}})]),e._v(" "),n("div",{staticStyle:{"text-align":"left",color:"#20a0ff","font-size":"12px","margin-top":"13px"}},[n("span",[e._v("用户名:")]),n("span",[e._v(e._s(t.username))])]),e._v(" "),n("div",{staticStyle:{"text-align":"left",color:"#20a0ff","font-size":"12px","margin-top":"13px"}},[n("span",[e._v("电子邮箱:")]),n("span",[e._v(e._s(t.email))])]),e._v(" "),n("div",{staticStyle:{"text-align":"left",color:"#20a0ff","font-size":"12px","margin-top":"13px"}},[n("span",[e._v("注册时间:")]),n("span",[e._v(e._s(e._f("formatDateTime")(t.regTime)))])]),e._v(" "),n("div",{staticStyle:{"text-align":"left",color:"#20a0ff","font-size":"12px","margin-top":"13px",display:"flex","align-items":"center"}},[n("span",[e._v("用户状态:")]),e._v(" "),n("el-switch",{staticStyle:{"font-size":"12px"},attrs:{"active-text":"启用","active-color":"#13ce66","inactive-text":"禁用"},on:{change:function(n){e.enabledChange(t.enabled,t.id,a)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"user.enabled"}})],1),e._v(" "),n("div",{staticStyle:{"text-align":"left",color:"#20a0ff","font-size":"12px","margin-top":"13px"}},[n("span",[e._v("用户角色:")]),e._v(" "),e._l(t.roles,function(t){return n("el-tag",{key:t.id,staticStyle:{"margin-right":"8px"},attrs:{size:"mini",type:"success"}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),e._v(" "),n("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:e.eploading[a],expression:"eploading[index]"}],key:a+""+t.id,attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{hide:function(n){e.saveRoles(t.id,a)}}},[n("el-select",{key:t.id,attrs:{multiple:"",placeholder:"请选择",size:"mini"},model:{value:e.roles,callback:function(t){e.roles=t},expression:"roles"}},e._l(e.allRoles,function(e,a){return n("el-option",{key:t.id+"-"+e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),n("el-button",{staticStyle:{"padding-top":"0px"},attrs:{slot:"reference",type:"text",icon:"el-icon-more"},on:{click:function(n){e.showRole(t.roles,t.id,a)}},slot:"reference"})],1)],2)])])}))])},staticRenderFns:[]},j=n("VU/8")(B,P,!1,null,null,null).exports,H={methods:{querySalesByCategory:function(){var e=this;m("/comments/category-sales").then(function(t){e.categorySales=t.data.data},function(t){403==t.response.status&&e.$message({type:"error",message:t.response.data})})},analysisSalesByCategory:function(){var e=this;this.isLoading=!0,this.btnTxt="分析中...",m("/analysis/category-sales").then(function(t){"success"==t.data.status?e.$message({type:t.data.status,message:t.data.msg}):e.$message({type:"error",message:"分析失败!"}),e.isLoading=!1,e.btnTxt="分析"},function(t){e.$message({type:"error",message:"数据加载失败!"}),e.isLoading=!1,e.btnTxt="分析"})}},mounted:function(){this.querySalesByCategory()},data:function(){return{btnTxt:"分析",isLoading:!1,categorySales:[]}}},G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",{staticClass:"product_order_header"},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium"},on:{click:this.querySalesByCategory}},[this._v("查询")]),this._v(" "),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium",loading:this.isLoading},on:{click:this.analysisSalesByCategory}},[this._v(this._s(this.btnTxt))])],1),this._v(" "),t("el-main",{staticClass:"product_order_main"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:this.categorySales,"tooltip-effect":"dark"}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"55",align:"left"}}),this._v(" "),t("el-table-column",{attrs:{label:"商品种类",prop:"category",width:"200",align:"left"}}),this._v(" "),t("el-table-column",{attrs:{label:"销售量",prop:"saleVolumn",width:"120",align:"left"}})],1)],1)],1)},staticRenderFns:[]},X=n("VU/8")(H,G,!1,function(e){n("nLfL")},null,null).exports;a.default.use(o.a);var Q=new o.a({routes:[{path:"/",name:"登录",hidden:!0,component:f},{path:"/home",name:"",component:y,hidden:!0},{path:"/home",component:y,name:"数据分析",iconCls:"fa fa-file-text-o",children:[{path:"/analysis/sales",name:"商品销量排行",component:A,meta:{keepAlive:!0}},{path:"/analysis/trend",name:"商品评分趋势",component:R,meta:{keepAlive:!1}},{path:"/analysis/statistics",name:"商品评分统计",component:q,meta:{keepAlive:!1}},{path:"/analysis/category",name:"商品类型-销量分析",component:X,meta:{keepAlive:!1}}]},{path:"/home",component:y,name:"用户管理",children:[{path:"/user",iconCls:"fa fa-user-o",name:"用户管理",component:j}]},{path:"/home",component:y,name:"评论管理",children:[{path:"/dataManage",iconCls:"fa fa-reorder",name:"评论管理",component:N}]}]}),Z=n("zL8q"),K=n.n(Z);n("tvR6"),n("e0XP");a.default.filter("formatDate",function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),n+"-"+a+"-"+i}),a.default.filter("formatDateTime",function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),s=t.getHours(),o=t.getMinutes(),r=t.getSeconds();return a<10&&(a="0"+a),i<10&&(i="0"+i),n+"-"+a+"-"+i+" "+s+":"+o+":"+r}),a.default.use(K.a),a.default.config.productionTip=!1,window.bus=new a.default,new a.default({el:"#app",router:Q,template:"<App/>",components:{App:s}})},"Q+7Z":function(e,t){},QKPl:function(e,t){},d4F1:function(e,t){},e0XP:function(e,t){},l40k:function(e,t){},nLfL:function(e,t){},p9uA:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.56c908bcac89664909f7.js.map